(function(a){typeof define=='function'&&define.amd?define(['jquery'],a):typeof module=='object'&&module.exports?module.exports=a(require('jquery')):a(jQuery)})(function(a){var g=Array.prototype.slice,k=Array.prototype.splice,e={topSpacing:0,bottomSpacing:0,className:'is-sticky',wrapperClassName:'sticky-wrapper',center:!1,getWidthFrom:'',widthFromWrapper:!0,responsiveWidth:!1,zIndex:'inherit'},f=a(window),j=a(document),c=[],h=f.height(),d=function(){for(var g=f.scrollTop(),n=j.height(),m=n-h,l=g>m?m-g:0,i=0,q=c.length,b,o,p,d,e,k,r;i<q;i++)b=c[i],o=b.stickyWrapper.offset().top,p=o-b.topSpacing-l,g<=p?b.currentTop!==null&&(b.stickyElement.css({width:'',position:'',top:'','z-index':''}),b.stickyElement.parent().removeClass(b.className),b.stickyElement.trigger('sticky-end',[b]),b.currentTop=null):(d=n-b.stickyElement.outerHeight()-b.topSpacing-b.bottomSpacing-g-l,d<0?d=d+b.topSpacing:d=b.topSpacing,b.currentTop!==d&&(b.getWidthFrom?(padding=b.stickyElement.innerWidth()-b.stickyElement.width(),e=a(b.getWidthFrom).width()-padding||null):b.widthFromWrapper&&(e=b.stickyWrapper.width()),e==null&&(e=b.stickyElement.width()),b.stickyElement.css('width',e).css('position','fixed').css('top',d).css('z-index',b.zIndex),b.stickyElement.parent().addClass(b.className),b.currentTop===null?b.stickyElement.trigger('sticky-start',[b]):b.stickyElement.trigger('sticky-update',[b]),b.currentTop===b.topSpacing&&b.currentTop>d||b.currentTop===null&&d<b.topSpacing?b.stickyElement.trigger('sticky-bottom-reached',[b]):b.currentTop!==null&&d===b.topSpacing&&b.currentTop<d&&b.stickyElement.trigger('sticky-bottom-unreached',[b]),b.currentTop=d),k=b.stickyWrapper.parent(),r=b.stickyElement.offset().top+b.stickyElement.outerHeight()>=k.offset().top+k.outerHeight()&&b.stickyElement.offset().top<=b.topSpacing,r?b.stickyElement.css('position','absolute').css('top','').css('bottom',0).css('z-index',''):b.stickyElement.css('position','fixed').css('top',d).css('bottom','').css('z-index',b.zIndex))},i=function(){var e,g,b,d;h=f.height();for(e=0,g=c.length;e<g;e++)b=c[e],d=null,b.getWidthFrom?b.responsiveWidth&&(d=a(b.getWidthFrom).width()):b.widthFromWrapper&&(d=b.stickyWrapper.width()),d!=null&&b.stickyElement.css('width',d)},b={init:function(d){return this.each(function(){var g=a.extend({},e,d),f=a(this),h=f.attr('id'),i=h?h+'-'+e.wrapperClassName:e.wrapperClassName,k=a('<div></div>').attr('id',i).addClass(g.wrapperClassName),j;f.wrapAll(function(){if(a(this).parent("#"+i).length==0)return k}),j=f.parent(),g.center&&j.css({width:f.outerWidth(),marginLeft:"auto",marginRight:"auto"}),f.css("float")==="right"&&f.css({float:"none"}).parent().css({float:"right"}),g.stickyElement=f,g.stickyWrapper=j,g.currentTop=null,c.push(g),b.setWrapperHeight(this),b.setupChangeListeners(this)})},setWrapperHeight:function(d){var b=a(d),c=b.parent();c&&c.css('height',b.outerHeight())},setupChangeListeners:function(a){if(window.MutationObserver){var c=new window.MutationObserver(function(c){(c[0].addedNodes.length||c[0].removedNodes.length)&&b.setWrapperHeight(a)});c.observe(a,{subtree:!0,childList:!0})}else window.addEventListener?(a.addEventListener('DOMNodeInserted',function(){b.setWrapperHeight(a)},!1),a.addEventListener('DOMNodeRemoved',function(){b.setWrapperHeight(a)},!1)):window.attachEvent&&(a.attachEvent('onDOMNodeInserted',function(){b.setWrapperHeight(a)}),a.attachEvent('onDOMNodeRemoved',function(){b.setWrapperHeight(a)}))},update:d,unstick:function(b){return this.each(function(){for(var d=this,e=a(d),f=-1,b=c.length;b-- >0;)c[b].stickyElement.get(0)===d&&(k.call(c,b,1),f=b);f!==-1&&(e.unwrap(),e.css({width:'',position:'',top:'',float:'','z-index':''}))})}};window.addEventListener?(window.addEventListener('scroll',d,!1),window.addEventListener('resize',i,!1)):window.attachEvent&&(window.attachEvent('onscroll',d),window.attachEvent('onresize',i)),a.fn.sticky=function(c){if(b[c])return b[c].apply(this,g.call(arguments,1));if(typeof c=='object'||!c)return b.init.apply(this,arguments);a.error('Method '+c+' does not exist on jQuery.sticky')},a.fn.unstick=function(c){if(b[c])return b[c].apply(this,g.call(arguments,1));if(typeof c=='object'||!c)return b.unstick.apply(this,arguments);a.error('Method '+c+' does not exist on jQuery.sticky')},a(function(){setTimeout(d,0)})})